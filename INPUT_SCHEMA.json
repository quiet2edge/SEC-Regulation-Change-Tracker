{
  "title": "SEC Regulation Change Monitor Input",
  "description": "Configure companies (tickers/CIKs), forms, date filters, outputs, and enrichment options.",
  "type": "object",
  "schemaVersion": 1,
  "properties": {
    "targets": {
      "title": "Targets",
      "type": "object",
      "description": "Specify companies to monitor by ticker and/or CIK.",
      "editor": "json",
      "prefill": {
        "tickers": [],
        "ciks": []
      },
      "properties": {
        "tickers": {
          "title": "Tickers",
          "type": "array",
          "description": "List of tickers to monitor (e.g., AAPL).",
          "editor": "json",
          "default": []
        },
        "ciks": {
          "title": "CIKs",
          "type": "array",
          "description": "List of CIKs to monitor (with or without leading zeros).",
          "editor": "json",
          "default": []
        }
      }
    },
    "forms": {
      "title": "Forms",
      "type": "array",
      "description": "SEC forms to track (EDGAR form strings).",
      "editor": "json",
      "default": [
        "S-1",
        "S-3",
        "S-4",
        "10-Q",
        "10-K",
        "8-K",
        "DEF 14A",
        "SC 13D",
        "SC 13G",
        "ADV",
        "D"
      ]
    },
    "dateRange": {
      "title": "Date range filter",
      "type": "object",
      "description": "Optional filter for filingDate (YYYY-MM-DD). Leave blank to use last-run state only.",
      "editor": "json",
      "prefill": {
        "startDate": "",
        "endDate": ""
      },
      "properties": {
        "startDate": {
          "title": "Start date",
          "type": "string",
          "description": "Inclusive start date (YYYY-MM-DD). Leave empty for no start bound.",
          "editor": "textfield",
          "default": ""
        },
        "endDate": {
          "title": "End date",
          "type": "string",
          "description": "Inclusive end date (YYYY-MM-DD). Leave empty for no end bound.",
          "editor": "textfield",
          "default": ""
        }
      }
    },
    "backfill": {
      "title": "Backfill historical data on first run",
      "type": "boolean",
      "description": "If true and there is no stored state yet, seed dataset from dateRange or last N days. If false, only track from deployment/run date forward.",
      "editor": "checkbox",
      "default": false
    },
    "backfillDays": {
      "title": "Backfill lookback days",
      "type": "integer",
      "description": "Used only when backfill=true and dateRange is empty.",
      "editor": "number",
      "default": 30,
      "minimum": 1,
      "maximum": 3650
    },
    "outputFormats": {
      "title": "Output formats",
      "type": "array",
      "description": "JSON is always stored in the dataset; CSV additionally exports to OUTPUT.csv in the key-value store.",
      "editor": "select",
      "items": {
        "type": "string",
        "enum": [
          "json",
          "csv"
        ]
      },
      "default": [
        "json",
        "csv"
      ]
    },
    "checkFrequency": {
      "title": "Intended check frequency",
      "type": "string",
      "description": "For your UX only; scheduling is configured outside the actor (Apify Scheduler / webhooks).",
      "editor": "select",
      "enum": [
        "realtime",
        "hourly",
        "daily",
        "weekly"
      ],
      "default": "daily"
    },
    "userAgent": {
      "title": "SEC User-Agent header",
      "type": "string",
      "description": "Required. SEC asks automated clients to identify themselves. Example: 'YourName your.email@domain.com'.",
      "editor": "textfield",
      "minLength": 8
    },
    "maxCompanies": {
      "title": "Max companies per run",
      "type": "integer",
      "description": "Safety limit to avoid huge runs.",
      "editor": "number",
      "default": 200,
      "minimum": 1,
      "maximum": 2000
    },
    "maxFilingsPerCompany": {
      "title": "Max filings to scan per company",
      "type": "integer",
      "description": "Limit how many recent filings to evaluate per company.",
      "editor": "number",
      "default": 200,
      "minimum": 10,
      "maximum": 2000
    },
    "requestConcurrency": {
      "title": "HTTP concurrency",
      "type": "integer",
      "description": "Parallelism for SEC requests (keep modest to be nice to EDGAR).",
      "editor": "number",
      "default": 4,
      "minimum": 1,
      "maximum": 10
    },
    "enrich": {
      "title": "Enrichment options",
      "type": "object",
      "description": "Controls enrichment and parsing of filing documents.",
      "editor": "json",
      "prefill": {
        "parseSections": true,
        "aiSummarize": true,
        "openaiApiKey": "",
        "aiModel": "gpt-4o-mini",
        "maxSectionChars": 12000
      },
      "properties": {
        "parseSections": {
          "title": "Parse key sections",
          "type": "boolean",
          "description": "Attempt to extract Risk Factors and Financial Statements sections from filing text.",
          "editor": "checkbox",
          "default": true
        },
        "aiSummarize": {
          "title": "AI summarize key changes",
          "type": "boolean",
          "description": "If true, uses OpenAI (requires openaiApiKey) to summarize changes for new filings and amendments.",
          "editor": "checkbox",
          "default": true
        },
        "openaiApiKey": {
          "title": "OpenAI API key (optional)",
          "type": "string",
          "description": "Optional. If provided and aiSummarize=true, generates an AI change summary. Store as an Actor input secret in Apify.",
          "editor": "textfield",
          "default": ""
        },
        "aiModel": {
          "title": "OpenAI model",
          "type": "string",
          "description": "Model name for summaries.",
          "editor": "textfield",
          "default": "gpt-4o-mini"
        },
        "maxSectionChars": {
          "title": "Max chars per extracted section",
          "type": "integer",
          "description": "Caps extracted text size to control costs and dataset bloat.",
          "editor": "number",
          "default": 12000,
          "minimum": 1000,
          "maximum": 50000
        }
      }
    }
  },
  "required": [
    "userAgent"
  ]
}